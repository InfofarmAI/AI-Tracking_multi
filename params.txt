パラメータまとめ

【ピクセル値】
'transform_size': [(7068, 9353), (0, 9353), (0, 1990), (7068, 1990)],   # 社内検証用実寸距離
'area_size': [(700, 242), (1397, 310), (1835, 833), (78, 555)],         # 歪み補正後のピクセル値(新カメラ)

【歪み補正】
## 192.168.1.129
mtx    : [[1593.8569696359402, 0.0, 948.5023344234389], [0.0, 1592.1330656435093, 493.75725255425675], [0.0, 0.0, 1.0]],
dist   : [[-0.5531063402711797, 0.34804231557071125, 0.0018585015132237634, -0.0010655046491671915, -0.10976967100901569]],
new_mtx: [[1076.4622478306103, 0.0, 930.8979027781083], [0.0, 1074.360139516635, 488.15396578614286], [0.0, 0.0, 1.0]]

## 192.168.1.153
mtx    : [[1523.5107629486497, 0.0, 988.3403412076979], [0.0, 1527.5556583377024, 543.5957164780888], [0.0, 0.0, 1.0]],
dist   : [[-0.5374105804439261, 0.34513698358807465, -0.0048885860631969055, -0.0018708543635481353, -0.078079306649468]],
new_mtx: [[1106.215659683132, 0.0, 985.9998814343543], [0.0, 1117.5638396820302, 531.4308434369808], [0.0, 0.0, 1.0]]

## 192.168.1.145
mtx    : [[2199.8176164064894, 0.0, 970.5002943983237], [0.0, 2216.595916643273, 543.106022302999], [0.0, 0.0, 1.0]],
dist   : [[-0.9740704007462042, 1.390899732361282, -0.004025884023074525, 0.007939170762013538, -1.2037368108707254]],
new_mtx: [[1573.9959011006392, 0.0, 1022.6959562287814], [0.0, 1533.9535382250315, 533.1975383729989], [0.0, 0.0, 1.0]]

C:/Users/hirat/.conda/envs/iroato/python.exe c:/Users/hirat/Documents/app/MOT-Tracking-by-Detection-Pipeline/main.py

## 145
[[2191.405225381028, 0.0, 966.6748764250809], [0.0, 2259.479640461876, 518.9664028216126], [0.0, 0.0, 1.0]]
[[-0.36200984508135203, -1.5656856329148137, 0.008624755354557758, -0.03385980614846374, 3.0629292725873687]]
[[1739.4845366249297, 0.0, 880.5872067329384], [0.0, 1715.2609003834075, 531.6520351630569], [0.0, 0.0, 1.0]]

## 146
[[1612.6799175246413, 0.0, 933.969055121876], [0.0, 1602.1099034423846, 461.30861352033685], [0.0, 0.0, 1.0]]
[[-0.5528479773934429, 0.4276933969810615, 0.006761232686190382, 0.004518924163623813, -0.2665577412969221]]
[[882.5673450938245, 0.0, 869.3251245107642], [0.0, 994.5420919849132, 578.0657639622408], [0.0, 0.0, 1.0]]

## 145(二回目)
[[1602.1805972023308, 0.0, 1021.7729809500348], [0.0, 1599.6939470786972, 488.03131939224227], [0.0, 0.0, 1.0]],
[[-0.5598696648856616, 0.41125113125263685, 0.0030089042465805994, -0.007103759730825017, -0.23632728848414902]],
[[681.376923670306, 0.0, 1015.8032598440332], [0.0, 804.747011877749, 394.2036105624325], [0.0, 0.0, 1.0]]





# MySQLの接続情報を設定
host = 'localhost'
port = '3306'
db = 'cclog_db'
user = 'root'
passwd = '936dc1f872'

config = {
    'user': user,
    'password': passwd,
    'host': host,  # ホスト名
    'database': db,
    'port': port  # ポート番号
}
async_config = {
    'user': user,
    'password': passwd,
    'host': host,  # ホスト名
    'db': db,
    'port': int(port)  # ポート番号
}

CAMERA_CONFIG = {
    # 'カメラコード': {
        # area_size     : 画像におけるエリアのxy座標(1. 左上, 2. 右上, 3. 右下, 4. 左下)(単位: px),
        # transform_size: エリア実寸距離,
        # mtx: 歪み補正のパラメータ,
        # dist: 同上,
        # new_mtx: 同上,
    # }
    'HOB3334312': { # 192.168.1.146
        'area_size': [(1063, 549), (1022, 537), (1040, 526), (1079, 537)],         # 歪み補正後のピクセル値(新カメラ)
        'transform_size': [(4924, 5625), (4924, 5328), (5125, 5328), (5125, 5625)],   # 社内検証用実寸距離
        "mtx"    : [[1593.8569696359402, 0.0, 948.5023344234389], [0.0, 1592.1330656435093, 493.75725255425675], [0.0, 0.0, 1.0]],
        "dist"   : [[-0.5531063402711797, 0.34804231557071125, 0.0018585015132237634, -0.0010655046491671915, -0.10976967100901569]],
        "new_mtx": [[1076.4622478306103, 0.0, 930.8979027781083], [0.0, 1074.360139516635, 488.15396578614286], [0.0, 0.0, 1.0]]
    },
    'PFU2132157': { # 192.168.1.145
        # 'area_size': [(229, 307), (1118, 282), (1808, 664), (56, 875)],           # ピクセル値(旧カメラ)
        # 'transform_size': [(7068, 9353), (0, 9353), (0, 1990), (7068, 1990)],     # 社内検証用実寸距離
        # CCを印刷して射影変換をする用
        # 'area_size': [(454, 711), (517, 711), (528, 759), (460, 760)],              # ピクセル値(CC)
        # 'transform_size': [(5608, 2877), (5398, 2877), (5398, 2580), (5608, 2580)], # 社内検証用実寸距離(CC)
        # CCを印刷して射影変換をする用
        'area_size': [(1034, 549), (1073, 567), (1050, 576), (1011, 559)],              # ピクセル値(CC)
        'transform_size': [(4924, 5625), (4924, 5328), (5125, 5328), (5125, 5625)], # 展示会用実寸距離(CC)
        'mtx': [[1523.5107629486497, 0.0, 988.3403412076979], [0.0, 1527.5556583377024, 543.5957164780888], [0.0, 0.0, 1.0]],
        'dist': [[-0.5374105804439261, 0.34513698358807465, -0.0048885860631969055, -0.0018708543635481353, -0.078079306649468]],
        'new_mtx': [[1106.215659683132, 0.0, 985.9998814343543], [0.0, 1117.5638396820302, 531.4308434369808], [0.0, 0.0, 1.0]]
    }
}

# マッピング用縮尺
# WIDTH, HEIGHT = 7068, 9353 # 社内開発用
WIDTH, HEIGHT = 10415, 8140
REDUCTION_RATIO = (1920/WIDTH, 1080/HEIGHT)
# 解析映像のウィンドウサイズ
WINDOW_SIZE = (640, 380)
# INSERT処理の間隔
INSERT_INVERVAL = 1
FPS = 5



20240716
縦（A4）：4300
横（A4）：5400
マット継ぎ目：7400
エリア全体（縦）：6200
エリア全体（横）：15970
縮尺（横）：0.12022542
縮尺（縦）：0.1741935483870968

personmapbg_1.png